# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [1.2.7] - 2021-12-13
### 追加
- 輪郭線を押し出す方向を調整できるノーマルマップを追加
- 輪郭線のみ、ファーのみのシェーダーを追加
- リムライトにVR時の視差の強さを調整する機能を追加

### 変更
- Render Queueを基本設定にも表示
- HDRPでステンシルを無効化
- HDRPでファーの影が濃く出るように変更

### 修正
- Single Pass Instanced環境での屈折シェーダーの動作を修正
- HDRPでの透過シェーダーのRender Queueを修正
- HDRPでのモーションベクターの出力を修正

## [1.2.6] - 2021-12-01
### 追加
- いくつかのテクスチャにカスタムUVを追加
- 各機能に`ノーマルマップ強度`プロパティを追加
- マットキャップに`ぼかし`プロパティの追加
- アルファマスク、AOマスクに調整用プロパティを追加
- AudioLink非対応ワールドでの挙動調整用のプロパティの追加
- AudioLinkにスペクトラム表示を追加
- VRChatでセーフティー発動時のシェーダーのフォールバック先をカスタマイズする機能の追加

### 変更
- AOマップでGチャンネルを影色2の範囲として使えるように変更
- マットキャップのマスクでRGBチャンネルそれぞれを使えるように変更
- シェーダー設定から負荷に影響がほぼなかったカスタムUVを削除し常に有効化するように変更
- 汎用サンプラーをTrilinear化

### 修正
- 屈折シェーダーのForwardAddパスで透明度が反映されていなかったのを修正
- 屈折・宝石シェーダーの描画を修正
- テッセレーションシェーダーでフォグの処理がうまくできていなかったのを修正
- HDRPでのLiteバージョンのMatCapのUVのプロジェクションを修正

## [1.2.5] - 2021-11-21
### 修正
- ファーシェーダーでフォグの処理がうまくできていなかったのを修正

## [1.2.4] - 2021-11-20
### 追加
- 光沢のタイプのトゥーンに`範囲`と`ぼかし`プロパティを追加
- 発光に様々なUVモードを追加
- カスタムシェーダー作成時のappdata構造体の入力に`uint vertexID : SV_VertexID`を追加
- Light Layersに対応 (URP)

### 変更
- マテリアル・アニメーションからシェーダー設定をスキャンする機能のダイアログの表示タイミングを変更
- GUIを微調整
- interpolatorを削減
- トゥーンの光沢のタイプのアルゴリズムを変更
- lilToonMultiの輪郭線スキップ時の関数を変更

### 修正
- AudioLink非対応ワールドの判定がうまくできていなかった問題の修正
- ファーシェーダーで環境光の強度プロパティが適用されていなかったのを修正
- lilToonMultiの透過ファーシェーダーで描画モード切り替え時にZWriteがオフになっていたのを修正
- UVのスクロールと回転を併用した際の挙動を修正

## [1.2.3] - 2021-10-30
### 追加
- マットキャップのUV関係の機能を拡張
- 異方性反射を追加
- メインカラーのプロパティを_BaseMapと_BaseColorMapと_BaseColorにも保存されるように変更
- `複数ライトから光沢を生成`プロパティの追加
- マットキャップ、リムライト、ラメ、逆光ライトに`裏面で無効化`プロパティの追加

### 変更
- Stencil設定ボタンでOpaqueマテリアルのRenderQueueをAlphaTestに合わせるように変更

### 修正
- プリセットのRenderQueueがうまく適用されていなかったのを修正
- ファーのマスクをファーの処理後に適用されるように修正
- UPM版でシェーダー書き換えが適切に行われていなかった問題の修正
- ローカライゼーション対応漏れを修正
- HDRPでExposure使用時、Planer Reflection内で暗くなる問題を修正 (HDRP 11.0.0以降)
- 距離フェード機能に視差が発生しないように修正

## [1.2.2] - 2021-10-18
### 追加
- ライティングの設定をワンクリックで切り替える機能の追加

### 修正
- マットキャップのカスタムノーマルマップが機能していなかった問題の修正
- 遠距離でテッセレーションの分割が入る問題の修正
- シェーダーの自動設定で一部プロパティがスキャンされない可能性があった問題の修正

## [1.2.1] - 2021-10-17
### 修正
- ファーの長さプロパティが機能していなかった問題の修正
- ログの日付を修正

## [1.2.0] - 2021-10-17
### 追加
- HDRPに対応
- `明るさの上限`、`ライトのモノクロ化`、`ライト方向のオーバーライド`プロパティの追加
- 逆光ライト機能の追加
- ファーシェーダーに`根本の太さ`プロパティの追加
- マットキャップに`影部分で無効化`、`視差の強さ`プロパティの追加
- プロパティブロックにメニューを追加 (プロパティを一括コピー、ペーストできるようになりました)
- 裏面のUVをずらす機能を追加
- 透過シェーダーのバリエーションに1パス・2パスの追加
- シェーダーキーワードを利用するバリエーションの追加 (_lil/lilToonMulti)
- プリセット保存画面を開いている状態でマテリアルを選択した際の警告を追加
- カスタムシェーダー作成用のマクロを追加
- カスタムシェーダーのテンプレートを追加

### 変更
- 透過シェーダーのRenderQueueを2460に変更 (ステンシル用に余裕を持たせた)
- 屈折シェーダーのRenderQueueを2900に変更 (透過マテリアル越しの透けを回避)
- 屈折の強度に負の値を設定可能に変更
- 画面端でもマットキャップのUVが正面になるように変更
- `透過モード`を`描画モード`に改名
- 影設定の`メインカラーの強度`を`コントラスト`に改名
- `AlphaToMask`の切り替えに対応
- 透過シェーダーの`RenderType`を`TransparentCutout`に変更
- `影色への環境光影響度`のデフォルト値を0に変更
- 変更ログを`CHANGELOG.md`と`CHANGELOG_JP.md`に移動

### 修正
- PlayモードでParent Constraintが編集できない問題を修正
- 屈折シェーダーが特定条件下で一部アセットに干渉する可能性がある問題の修正
- メインテクスチャのSamplerStateをうまく取得できていなかった問題の修正

### 削除
- いくつかのhlslファイル

## [1.1.8] - 2021-08-31
### 追加
- 宝石シェーダー、FakeShadowシェーダーの追加
- ラメにUV1を参照するモードを追加
- ラメにVR時の視差の強さを調整する機能を追加

### 修正
- 発光のカラースペースを修正
- インポート時にラメのプロパティがスキャンされない問題を修正
- AvaterEncryption使用時に一部パスでメッシュが復号化されない問題を修正

## [1.1.7] - 2021-08-29
### 追加
- HDRカラーピッカーの隣にカラーコードを追加 (Unity2019以降)
- メインカラーの色調補正にマスクを追加
- メインカラー2nd・3rdに距離フェードを追加
- ラメ機能の追加

### 変更
- メインカラーのカラーピッカーをHDR化
- 行列計算の変更
- いくつかの処理を頂点シェーダーに移動し最適化

### 修正
- UPMインポートの修正
- `距離フェード`と`Dissolve`の透過を修正
- Unity 2019のURPでうまく動作しない問題を修正

## [1.1.6] - 2021-08-17
### 追加
- ヘルプボックスに自動修正ボタンを追加

### 変更
- 輪郭線のZTestのデフォルト値をLessEqualからLessに変更

### 修正
- 明るさの下限設定で影が弱くなる問題の修正

## [1.1.5] - 2021-08-08
### 追加
- `困ったときは…`を追加
- マットキャップのZ軸回転キャンセル機能のオンオフを追加

### 変更
- 透過処理を改善
- UIを整理

### 修正
- フォルダを移動可能にしました
- 不透明マテリアルにアルファマスクのプロパティが存在していた点を修正
- 一部翻訳を修正

## [1.1.4] - 2021-07-31
### 追加
- unitypackageインポート時のマテリアル・アニメーションの自動スキャン機能を追加
- `Auto shader setting`を追加、プロジェクト内の全マテリアル・アニメーションをスキャンし自動でシェーダー設定を最適化します
- `Remove unused properties`を追加、シェーダー設定を追加でオンにしても見た目に影響が出ないようにマテリアルを最適化します
- `Setup from FBX`を追加、FBXファイルから自動でマテリアルの生成、プリセットの適用、輪郭線マスク、影マスクの適用を行います
- ファーシェーダーに長さ調整用のマスクを追加
- `シェーダー設定`のロックを追加

### 変更
- 一部プロパティの表示名の変更 (`環境光の強さ`→`影色への環境光影響度`、`太さを補正`→`距離に応じた太さ補正`)
- 再生ボタンを押してもInspectorの状態が維持されるように変更
- ファーシェーダーの`Unlit化`のプロパティをスライダー化

## [1.1.3] - 2021-07-24
### 修正
- バージョンチェック失敗時にInspectorが表示されない問題の修正
- `[lilToon] Fix Lighting`でClothコンポーネントがある、もしくはボーンが無い場合に壊れる問題の修正

## [1.1.2] - 2021-07-20
### 追加
- マットキャップにカスタムノーマルマップを追加
- リムライトにライト方向によるカスタマイズ機能を追加
- メッシュ・マテリアルのライティングを一括設定する機能を追加

### 変更
- 輪郭線の太さに任意の値を設定可能に
- アルファマスクが輪郭線にも適用されるように変更

## [1.1.1] - 2021-07-16
### 追加
- シェーダーリフレッシュの追加
- プロパティのアルファが0のときに警告を表示

### 修正
- エディターのテーマ変更に対応

## [1.1] - 2021-07-15
### 追加
- アルファマスクの追加
- マットキャップ2ndの追加
- 明るさの下限や頂点ライトの強度を調整可能に
- 負荷が比較的高い機能に警告を追加 (屈折・POM)

### 修正
- URPにおいてCascadeShadowがうまく動作していなかった点
- マットキャップの"ライティングを適用"が正しく動作していなかった点
- 参考文献の追記

## [1.0] - 2021-07-12 [YANKED]