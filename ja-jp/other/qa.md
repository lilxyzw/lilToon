# Q&A

## VRCSDK・エディタエラー等のトラブル
- エディタのエラーが発生した  
  → Consoleからエラー内容をご確認ください。こちらの画像は意図的にエラーを引き起こした例です。

  <a href="images/ja-jp/qa-errorlog.webp" data-lightbox="qa-errorlog"><img src="images/ja-jp/qa-errorlog.webp" width="50%" alt="コンソールログの画像"></a>

  lilToonでエラーが発生している場合は以下の手順で修正できる場合がほとんどです。

  1. lilToonの最新版を上書きインポートする
  2. （1で解決しなかった場合）lilToonフォルダを一旦削除して再インポートする
  3. （2で解決しなかった場合）lilToonフォルダを右クリックし`Reimport`を選択する
  4. （3で解決しなかった場合）可能であれば[不具合報告](#上記にないトラブルが発生した場合)していただければ幸いです。コンソールログや発生条件などを添付していただけるとこちらで不具合を再現しやすくなり修正を行いやすくなります。

  もしlilToon以外でエラーが発生している場合は該当ツールのマニュアルをご確認ください。マニュアルに記載が無い場合はlilToonの対応方法と同様に再インポートなどの対応を行うと改善する場合があります。
- アバターのアップロード画面を開けなくなった  
  → lilToon、もしくはそれ以外の何らかのスクリプトでエラーが発生している可能性が高いです。例えば「アバターのunitypackageにlilToonが同梱されていて誤って新しいバージョンと古いバージョンが混在させてしまった」等のケースがあります。こちらも上記`エディタのエラーが発生した`と同様の対応を行ってください。
- Unityプロジェクトが開けなくなった  
  → プロジェクトのフォルダを開き`Library`フォルダや`Temp`フォルダを削除すると開けるようになる場合があります（`Library`フォルダは念のためバックアップを取っておくと良いかもしれません）。様々な要因があるのでこちらの方法で解決しなかった場合は「unity プロジェクト 開けない」等で検索してその他の対処方法ご確認ください。

## よくあるトラブル

- アルファマスク（白黒の透過テクスチャ）を使いたい  
  → 以下の手順で利用できます
  - マテリアルエディタの[シェーダー設定](/ja-jp/other/settings.md)タブで`アルファマスク`にチェックを入れて`Apply`する
  - 描画モードを`カットアウト`もしくは`半透明`にする
  - 基本色設定内のアルファマスクにテクスチャを割り当てる
- 透過を使った部分（表情など）の表示がおかしい  
  → 以下の点をご確認ください。
  - 描画モードが`半透明`になっているか
  - テクスチャに透明度が含まれているか（いない場合は`アルファマスク`を利用している可能性があるので上記`アルファマスク（白黒の透過テクスチャ）を使いたい`の手順をご確認ください。）
  - `Render Queue`の設定は適切か（透過マテリアル同士が重なると片方が見えなくなる場合があります。その場合は手前に表示されるマテリアルのRender Queueの値を上げることで改善されます。）
- 一部機能が存在しないように見える  
  → 機能を追加したい場合はマテリアルエディタの[シェーダー設定](/ja-jp/other/settings.md)タブで適宜オンにして`Apply`してください
- マテリアルエラーが発生した  
  → 上部メニューバーの`Assets/lilToon/[Shader] Refresh Shaders`をクリックすると改善される場合があります。そもそもこの項目が表示されない場合はエディタにエラーが発生している可能性がありますので、上記`エディタのエラーが発生した`の項目をご確認ください。
- マテリアルを選択してもUIが表示されない  
  → 古いバージョンのlilToonが混在している可能性があります。上記`エディタのエラーが発生した`と同様の対応を行ってください。
- 部位によって明るさが変わる  
  → アバターを右クリックし`lilToon/[GameObject] Fix lighting`を選択することで自動で修正されます。
- 顔にかかる影が気になる  
  → `マスクと強度`にマスクテクスチャを指定することで部分的に影を消すことができます。VRChatなどで利用する場合はそもそもライティング条件が特殊なケースがあるためそもそも影を入れない、もしくは[ライティング設定](/ja-jp/base/lighting)の`ライト方向のオーバーライド`を利用するという選択肢も考えられます。
- 輪郭線が汚くなる  
  → `マスクと太さ`にマスクテクスチャを指定することで部分的に輪郭線を消したり太さを調整したりすることができます。また、ハードエッジのモデルなどでなめらかな線を描画できない場合は頂点カラーに法線情報を記録することで修正できます。詳しくは[輪郭線設定](/ja-jp/advanced/outline.md)の項目をご確認ください。
- 明るい場所で影が薄くなる  
  → [ライティング設定](/ja-jp/base/lighting)の`影色への環境光影響度`の数値を下げると明るい場所でも影が強く出ます。
- シェーダー設定でどれをオンにすべきかわからない  
  → 上部メニューバーから`Assets/lilToon/Auto shader setting`を実行することで自動でシェーダー設定が行えます。
- SRPの特定のバージョンでエラーが発生する  
  → SRP 7.0.0以前ではバージョン番号が拾えないため大まかなバージョン判定しかできません。  
  エラーが発生する場合は`lilToon/Shader/Includes/lil_common_macro.hlsl`内で詳細なバージョンを指定するか最新版にアップデートする必要があります。  
  例: HDRP 4.8.0
  ```HLSL
  #define SHADER_LIBRARY_VERSION_MAJOR 4
  #define SHADER_LIBRARY_VERSION_MINOR 8
  ```


## 上記にないトラブルが発生した場合
これ以外でトラブルが発生し不具合であることが疑われる場合は[Twitter](https://twitter.com/lil_xyzw)、[GitHub](https://github.com/lilxyzw/lilToon)、[BOOTH](https://lilxyzw.booth.pm/)のいずれかにご連絡いただければ幸いです。以下にテンプレートも用意させていただきましたのでバグ報告の際の参考にご活用下さい。
```
バグ: 
再現方法: 

# 可能であれば
Unityバージョン: 
シェーダー設定: 
VRChatのワールド: 
スクリーンショット: 
コンソールログ: 
```